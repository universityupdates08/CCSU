
<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CCSU NEP Result Calculator (with Grace)</title>
<style>

/* === Header === */
header {
  text-align: center;
  padding: 15px;
  background: linear-gradient(135deg, #89f7fe, #66a6ff);
  color: white;
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);
  border-radius: 0 0 20px 20px;
}
header img {
  height: 60px;
  margin-bottom: 8px;
  filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.4));
}
header h1 {
  margin: 5px 0;
  font-size: 28px;
  font-weight: bold;
  text-shadow: 2px 2px 6px rgba(0,0,0,0.4);
}

body { 
  font-family: Arial, sans-serif; 
  background: linear-gradient(135deg, #fffde7, #ffffff, #e3f2fd); 
  margin:0; 
  padding:10px; 
}
.tabs { display:flex; justify-content:center; margin:20px 0; gap:10px; }
.tab-btn { 
  background:#fff; 
  border:2px solid #007bff; 
  color:#007bff; 
  padding:10px 20px; 
  margin:0 5px; 
  border-radius:12px; 
  font-weight:bold; 
  cursor:pointer; 
  box-shadow:0 4px 10px rgba(0,123,255,0.2); 
  transition:.3s; 
}
.tab-btn.active { 
  background:#007bff; 
  color:#fff; 
  transform:scale(1.05); 
  box-shadow:0 6px 14px rgba(0,123,255,0.4); 
}
.tab-content { 
  display:none; 
  max-width:900px; 
  margin:auto; 
  background:#ffffff; 
  padding:20px; 
  border-radius:16px; 
  box-shadow:0 6px 20px rgba(0,0,0,0.25); 
  transform:translateY(10px); 
  animation:popup .5s ease-out forwards; 
}
.tab-content.active { display:block; }
@keyframes popup {
  from {opacity:0; transform:scale(0.95);}
  to {opacity:1; transform:scale(1);}
}
.cta, button { 
  padding:10px 18px; 
  border:none; 
  border-radius:10px; 
  background:linear-gradient(135deg,#ffeb3b,#2196f3); 
  color:#333;
  font-weight:600; 
  cursor:pointer; 
  transition:.3s; 
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
}
.cta:hover, button:hover { 
  transform:scale(1.08); 
  box-shadow:0 6px 16px rgba(0,0,0,0.35); 
}
.rules { 
  background:#fdfde7; 
  padding:12px; 
  border:1px solid #ccc; 
  margin:10px 0; 
  border-radius:12px; 
  box-shadow:inset 0 2px 6px rgba(0,0,0,0.1);
}
.subject { display:flex; gap:6px; margin:6px 0; flex-wrap:wrap; }
.subject input, .subject select { padding:5px; border-radius:6px; border:1px solid #ccc; }
.pass{color:green;font-weight:bold;} 
.fail{color:red;font-weight:bold;} 
.grace{color:red;} 
.remark{color:#555; font-style:italic; margin-left:8px;}
.print-btn { margin-top:10px; background:#28a745; color:#fff; }
.print-btn:hover { background:#218838; }

table { width:100%; border-collapse: collapse; margin-top:12px; font-size:0.75em; }
thead { background:#f0f0f0; }
th, td { border:1px solid #ccc; padding:5px; text-align:center; }
.pass { color:green; font-weight:bold; }
.fail { color:red; font-weight:bold; }
.grace { color:red; font-weight:bold; }
.graceApplied { background:#fff0f0; } 
#overall { font-size:1em; text-align:center; margin-top:8px; font-weight:bold; }
#note { margin-top:12px; font-size:0.7em; text-align:center; color:#333; }

/* ‚úÖ Grade Card light yellow */
#gradeCard {
  background: #fffde7;
  padding: 8px;
  border-radius: 6px;
  box-shadow:0 3px 6px rgba(0,0,0,0.15);
}
</style>
</head>
<body>

  <!-- HEADER -->
<header>
  <img src="https://i.ibb.co/nMC0877T/UNIVERSITY-UPDATES-LOGO-removebg-preview.png" alt="Calculator Logo">
  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ5629GD0zFGETdLJFp1s9DHGckHFVhEp-wcg&s" alt="Calculator Logo">
</header>
  
<h1 style="text-align:center; color:#0d47a1; text-shadow:1px 1px 4px rgba(0,0,0,0.3);">CCSU NEP Result Calculator (with Grace)</h1>

<header>
  <nav style="text-align:center; display:flex; justify-content:center; gap:12px;">
    <a href="https://whatsapp.com/channel/0029Va4irjP23n3Vh4HMcx00" class="cta">WhatsApp</a>
    <a href="https://whatsapp.com/channel/0029Va8mCyHDuMRolLgWPM2S" class="cta">WhatsApp</a>
    <a href="https://t.me/CCSUniversityMRT" class="cta">Telegram</a>
    <a href="https://t.me/ccsnewsupdates" class="cta">Telegram</a>
    <a href="https://t.me/HELPforDmbot" class="cta">Contact</a>
  </nav>
</header>

<main class="container">
  <div style="text-align: center; margin: 20px 0; color:#007bff; font-size:15px;">
    <b>Note:</b> This is not an Official Website of <b>Chaudhary Charan Singh University, Meerut</b>.  
    "This is for information purposes only. Errors in result calculation are possible."
  </div>
      
  <div style="text-align: center; margin: 20px 0;">
    <h2 style="font-size: 18px; font-weight: bold; color: #2c3e50;">
      Meet Our <span style="color: #007bff;">Admin Team</span>
    </h2>
    <p style="font-size: 16px; color: #555;">
      <b>Aditya Chaudhary</b> (Owner - CCS University, Meerut & Other Colleges Updates) | <b>Sanjeev Chauhan</b> (Owner - CCS University Meerut & SSV College Hapur Updates)
    </p>
  </div>


<!-- Grace Rules -->
<div class="rules">
<h2>Grace Rules</h2>
<ul>
        <li>Max 5 grace marks</li>
        <li>Grace in max 3 subjects</li>
        <li>Grace Marks will be given in <b>External Theory & Co-Curricular</b> only</li>
        <li>No Grace in Practical/Skill Development/Viva/Project</li>
        <li>Passing: Major/Minor = 25 External & 33 Total</li>
        <li>Passing: Skill/Project/Co-Curricular = 40 Total</li>
</ul>
</div>

<!-- Semester Selection -->
<div class="subject-section">
<h2>Select Semester</h2>
<select id="semester" onchange="semesterChange()">
  <option value="">--Select Semester--</option>
  <option value="1">1st Semester</option>
  <option value="2">2nd Semester</option>
  <option value="3">3rd Semester</option>
  <option value="4">4th Semester</option>
  <option value="5">5th Semester</option>
  <option value="6">6th Semester</option>
</select>
</div>

<!-- Marks Section -->
<div id="marksSection" style="display:none;">

  <div id="semTitle" style="text-align:center; font-weight:bold; font-size:1em; margin-bottom:8px;"></div>

  <div class="subject-section">
  <h2>Major Theory Subjects</h2>
  <div id="majorTheorySubjects"></div>
  <button onclick="addMajorTheory()">Add Major Theory</button>
  </div>

  <div class="subject-section">
  <h2>Major Practical Subjects</h2>
  <div id="majorPracticalSubjects"></div>
  <button onclick="addMajorPractical()">Add Major Practical</button>
  </div>

  <div class="subject-section" id="minorSection">
  <h2>Minor Subjects</h2>
  <div id="minorSubjects"></div>
  <button onclick="addMinor()">Add Minor Subject</button>
  </div>

  <div class="subject-section" id="skillSection">
  <h2>Skill Development</h2>
  <div id="skillSubjects"></div>
  <button onclick="addSkill()">Add Skill Development</button>
  </div>

  <div class="subject-section">
  <h2>Co-Curricular</h2>
  <div class="subject">
  <label>Co-Curricular:</label>
  EXT <input type="number" min="0" max="99" class="coExternal">
  INT <input type="number" min="0" max="99" class="coInternal">
  </div>
  </div>

  <div class="subject-section" id="projectSection" style="display:none;">
  <h2>Project</h2>
  <div id="projectSubjects"></div>
  <button onclick="addProject()">Add Project</button>
  </div>

  <div style="text-align:center; margin-top:8px;">
  <button onclick="calculateResult()">Calculate Result</button>
  <button onclick="resetForm()">Reset</button>
  <button onclick="downloadPDF()">Download Grade Card (PDF)</button>
  </div>

  <div id="gradeCard">
  <table id="resultTable">
  <thead>
  <tr>
  <th>Subject</th>
  <th>External</th>
  <th>Grace</th>
  <th>External after Grace</th>
  <th>Internal</th>
  <th>Total</th>
  <th>Status</th>
  <th>Remarks</th>
  </tr>
  </thead>
  <tbody></tbody>
  </table>
  <div id="overall"></div>
  <div id="note">This result is only for information purpose. Not valid to use for admission or other activities</div>
  </div>
<footer style="text-align:center; margin:20px 0; font-weight:bold; color:#007bff;">
  ¬© 2025 | Designed by <b>Aditya Chaudharyüíó/Sanjeev Chauhanüíó</b>
</footer>

</div>

<script>
let majorTheoryCount=0, majorPracticalCount=0, minorCount=0, skillCount=0, projectCount=0;
const maxGrace=5, maxGraceSubjects=3;
for(let i=0;i<3;i++) addMajorTheory();

function semesterChange(){
  let sem=document.getElementById("semester").value;
  let semTitle=document.getElementById("semTitle");
  if(sem===""){ document.getElementById("marksSection").style.display="none"; return; }
  document.getElementById("marksSection").style.display="block";
  semTitle.innerHTML="Semester: "+sem;
  if(sem==="5" || sem==="6"){ document.getElementById("minorSection").style.display="none"; document.getElementById("skillSection").style.display="none"; }
  else { document.getElementById("minorSection").style.display="block"; document.getElementById("skillSection").style.display="block"; }
  if(sem==="6"){ document.getElementById("projectSection").style.display="block"; }
  else { document.getElementById("projectSection").style.display="none"; }
}

function addSubject(containerId,name,extClass,intClass,label1="EXT",label2="INT"){
  const container=document.getElementById(containerId);
  container.style.display="block";
  const div=document.createElement("div");
  div.className="subject";
  div.innerHTML=`<label>${name}:</label>
  ${label1} <input type="number" class="${extClass}" min="0" max="99">`+
  (intClass?` ${label2} <input type="number" class="${intClass}" min="0" max="99">`:"");
  container.appendChild(div);
}
function addMajorTheory(){ majorTheoryCount++; addSubject("majorTheorySubjects","Major Theory "+majorTheoryCount,"majorTheoryExternal","majorTheoryInternal"); }
function addMajorPractical(){ majorPracticalCount++; addSubject("majorPracticalSubjects","Major Practical "+majorPracticalCount,"majorPracticalExternal","majorPracticalInternal"); }
function addMinor(){ minorCount++; addSubject("minorSubjects","Minor "+minorCount,"minorExternal","minorInternal"); }
function addSkill(){ skillCount++; addSubject("skillSubjects","Skill Development "+skillCount,"skillTheory","skillPractical","TH","PR"); }
function addProject(){ projectCount++; addSubject("projectSubjects","Project "+projectCount,"projectMarks",null,"Total",""); }

function calculateResult(){
  const majors=document.querySelectorAll(".majorTheoryExternal");
  const majorInternals=document.querySelectorAll(".majorTheoryInternal");
  const coExt=document.querySelector(".coExternal").value;
  const coInt=document.querySelector(".coInternal").value;
  let mandatoryOk=true;
  if(majors.length<3){ mandatoryOk=false; }
  else { for(let i=0;i<3;i++){ if((majors[i].value==="" || majorInternals[i].value==="")) mandatoryOk=false; } }
  if(coExt==="" || coInt==="") mandatoryOk=false;
  if(!mandatoryOk){ alert("Plz Enter Marks of All Subjects"); return; }

  const tbody=document.querySelector("#resultTable tbody"); tbody.innerHTML="";
  let graceLeft=maxGrace, remainingGraceSubjects=maxGraceSubjects;
  let subjects=[];
  [
    ["majorTheoryExternal","majorTheoryInternal","majorTheory","Major Theory"],
    ["majorPracticalExternal","majorPracticalInternal","majorPractical","Major Practical"],
    ["minorExternal","minorInternal","minor","Minor"],
    ["skillTheory","skillPractical","skill","Skill Development"],
    ["projectMarks",null,"project","Project"]
  ].forEach(([extClass,intClass,type,displayName])=>{
    const extInputs=document.querySelectorAll("."+extClass);
    const intInputs=intClass?document.querySelectorAll("."+intClass):[];
    extInputs.forEach((el,i)=>{
      const ext=Number(el.value)||0;
      const intr=intClass?Number(intInputs[i].value)||0:0;
      if(ext!==0 || intr!==0){ subjects.push({name:`${displayName} ${i+1}`,ext,internal:intr,type,grace:0, initialPass:false}); }
    });
  });
  const coE=Number(document.querySelector(".coExternal").value)||0;
  const coI=Number(document.querySelector(".coInternal").value)||0;
  if(coE || coI) subjects.push({name:"Co-Curricular",ext:coE,internal:coI,type:"coCurricular",grace:0,initialPass:false});

  function checkPass(subj,extTotal){
    const total=subj.internal+extTotal;
    if(subj.type==="majorTheory"||subj.type==="minor"||subj.type==="majorPractical") return (extTotal>=25 && total>=33);
    if(subj.type==="skill"||subj.type==="coCurricular"||subj.type==="project") return total>=40;
    return false;
  }
  subjects.forEach(subj=>{ subj.initialPass = checkPass(subj,subj.ext); });
  subjects.forEach(subj=>{
    if(graceLeft<=0 || remainingGraceSubjects<=0) return;
    let total=subj.ext+subj.internal; let needGrace=0;
    if(subj.type==="majorTheory"||subj.type==="minor"||subj.type==="majorPractical"){
      if(subj.ext<25){ needGrace=25-subj.ext; }
      if(needGrace===0 && total<33 && subj.ext>=25){ needGrace=33-total; }
    } else if(subj.type==="skill"||subj.type==="coCurricular"||subj.type==="project"){ if(total<40){ needGrace=40-total; } }
    if(needGrace>0){ const applied=Math.min(needGrace,graceLeft,maxGrace); subj.ext+=applied; subj.grace+=applied; graceLeft-=applied; remainingGraceSubjects--; }
  });

  let anyFailAfterGrace=false; subjects.forEach(subj=>{ if(!checkPass(subj,subj.ext)) anyFailAfterGrace=true; });
  subjects.forEach(subj=>{
    const total=subj.ext+subj.internal;
    let status=checkPass(subj,subj.ext)?"Pass":"Fail";
    if(subj.initialPass && subj.grace===0) status="Pass";
    if(anyFailAfterGrace && !subj.initialPass && subj.grace>0) status="Fail";
    let remark="";
    if(status==="Fail"){
      if(subj.type==="majorTheory"||subj.type==="minor"||subj.type==="majorPractical"){
        if(subj.ext<25) remark=`Need ${25-(subj.ext)} more marks in External`;
        else if(total<33) remark=`Need ${33-total} more marks in Total`;
      } else { remark=`Need ${40-total} more marks in Total`; }
    } else { remark="OK"; }

    if(anyFailAfterGrace && subj.grace>0){
      remark = `Grace Mark(s) Cancelled - ${remark}`;
    }

    const tr=document.createElement("tr");
    tr.className=subj.grace>0?"graceApplied":"";
    tr.innerHTML=`<td>${subj.name}</td><td>${subj.ext-subj.grace}</td><td class="grace">${subj.grace}</td><td>${subj.ext}</td><td>${subj.internal}</td><td>${total}</td><td class="${status==='Pass'?'pass':'fail'}">${status}</td><td>${remark}</td>`;
    tbody.appendChild(tr);
  });

  let totalGraceApplied = subjects.reduce((sum,subj)=>sum+subj.grace,0);
  if(anyFailAfterGrace){
    const failMessage='Fail (‡§ó‡•ç‡§∞‡•á‡§∏ ‡§Æ‡§ø‡§≤‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§≠‡•Ä ‡§Ø‡§¶‡§ø ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§µ‡§ø‡§∑‡§Ø ‡§Æ‡•á‡§Ç ‡§¨‡•à‡§ï ‡§∞‡§π‡§§‡•Ä ‡§π‡•à ‡§§‡•ã ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§µ‡§ø‡§∑‡§Ø ‡§Æ‡•á‡§Ç ‡§ó‡•ç‡§∞‡•á‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ)';
    document.getElementById("overall").innerHTML=`Overall Result: <span class="fail">${failMessage}</span>`;
  } else {
    if(totalGraceApplied>0){
      document.getElementById("overall").innerHTML=`Overall Result: <span class="pass">PASS with Grace - ${totalGraceApplied}</span>`;
    } else {
      document.getElementById("overall").innerHTML=`Overall Result: <span class="pass">PASS</span>`;
    }
  }
}

function resetForm(){ location.reload(); }
function downloadPDF(){
  const element=document.getElementById("gradeCard");
  const opt={ margin:0.5, filename:'GradeCard.pdf', image:{type:'jpeg',quality:0.98}, html2canvas:{scale:2}, jsPDF:{unit:'in',format:'a4',orientation:'portrait'} };
  html2pdf().set(opt).from(element).save();
}
</script>
</body>
</html>
